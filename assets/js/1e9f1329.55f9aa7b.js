"use strict";(self.webpackChunktestdoc=self.webpackChunktestdoc||[]).push([[9335],{4393:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"big-data/old/hive/concepts","title":"Hive","description":"* Is data warehouse","source":"@site/docs/big-data/old/hive/concepts.md","sourceDirName":"big-data/old/hive","slug":"/big-data/old/hive/concepts","permalink":"/Docs/docs/big-data/old/hive/concepts","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/big-data/old/hive/concepts.md","tags":[],"version":"current","frontMatter":{},"sidebar":"bigdataSidebar","previous":{"title":"DML","permalink":"/Docs/docs/big-data/old/hive/DML"},"next":{"title":"Yarn","permalink":"/Docs/docs/big-data/old/yarn/concepts"}}');var l=i(4848),r=i(8453);const t={},d="Hive",a={},c=[{value:"Services",id:"services",level:2},{value:"Tuning",id:"tuning",level:3},{value:"HA",id:"ha",level:3},{value:"Replication",id:"replication",level:3},{value:"Security",id:"security",level:3},{value:"About",id:"about",level:3},{value:"hive-site.xml",id:"hive-sitexml",level:3},{value:"core-site.xml",id:"core-sitexml",level:3},{value:"Data Model",id:"data-model",level:2},{value:"Table",id:"table",level:3},{value:"Partition",id:"partition",level:3},{value:"Bucket",id:"bucket",level:3},{value:"Types",id:"types",level:3},{value:"Internal vs external table",id:"internal-vs-external-table",level:3}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"hive",children:"Hive"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Is data warehouse"}),"\n",(0,l.jsx)(n.li,{children:"Uses HQL"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"services",children:"Services"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Hive"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Metastore"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Stores metadata of tables and partitions"}),"\n",(0,l.jsxs)(n.li,{children:["Hive in ",(0,l.jsx)(n.strong,{children:"remote mode"}),":","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Metastore use its own JVM process and other services communite with it using ",(0,l.jsx)(n.strong,{children:"Thrift API"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"HiveServer2"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"tuning",children:"Tuning"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Memory configuration"}),"\n",(0,l.jsx)(n.li,{children:"GC limits"}),"\n",(0,l.jsx)(n.li,{children:"Partitions number limits"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"ha",children:"HA"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Configure load balancer for HiveServer2"}),"\n",(0,l.jsx)(n.li,{children:"Enable HA for metastore"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"replication",children:"Replication"}),"\n",(0,l.jsx)(n.h3,{id:"security",children:"Security"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Authentication:"})," LDAP and Kerberos","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"If Kerberos is not enabled no need to provide password when connecting using Beeline CLI"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Authorization:"})," Ranger"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Encryption"})," SASL QOP or SSL/TLS"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"about",children:"About"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Hive do not enforce schema on write, but it"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"hive-sitexml",children:"hive-site.xml"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"hive.metastore.warehouse.dir"})," : default dir in hdfs where data is stored"]}),"\n",(0,l.jsx)(n.li,{children:"Metastore"}),"\n",(0,l.jsxs)(n.li,{children:["Driver: ",(0,l.jsx)(n.strong,{children:"javax.jdo.option.ConnectionDriverName"})]}),"\n",(0,l.jsxs)(n.li,{children:["Password: ",(0,l.jsx)(n.strong,{children:"javax.jdo.option.ConnectionPassword"})]}),"\n",(0,l.jsxs)(n.li,{children:["Url: ",(0,l.jsx)(n.strong,{children:"javax.jdo.option.ConnectionURL"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"core-sitexml",children:"core-site.xml"}),"\n",(0,l.jsx)(n.h2,{id:"data-model",children:"Data Model"}),"\n",(0,l.jsx)(n.h3,{id:"table",children:"Table"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Show"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"show tables in <namespace>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"show tables 'emp*'"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Describe"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"describe extended <tablename>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"describe formatted <tablename>"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Describe column"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"describe extended <tablename.columnname>"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Internal (managed)"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Data stored in default location"}),"\n",(0,l.jsx)(n.li,{children:"The data is dropped when the table is dropped"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"External"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Location is not the default one"}),"\n",(0,l.jsx)(n.li,{children:"Dropping table will not drop data, although table's metadata will be dropped"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"partition",children:"Partition"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"strict:"})," prohibit queries without where clause in partitioned tables"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"nonstrict:"})," allow running queries without where clause"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"set hive.mapred.mode=strict;"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"We can describe and show partitions"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"show partitions <tablename>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"show partitions <tablename> PARTITION(col_name='value')"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"We can alter table by adding partition"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"no support for insert, update and delete"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"doesn't support transactions"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"  Create table if not exists mydb.employee(\r\n      name string,\r\n      salary float,\r\n      adgress struct<street: string, city: string, state: string, zip: int> \r\n  )\r\n  PARTITIONED BY (country string, state string);\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Load data from file to partitioned table"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"LOAD DATA LOCAL INPATH '${env:HOME}/path/to/dir'\r\nINTO TABLE employees\r\nPARTITION (col_part_name1 = 'value1', col_part_name2 = 'value2');\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"bucket",children:"Bucket"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Each bucket is stored as file in partition directory"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"types",children:"Types"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Java types (int, string, float, ...)"}),"\n",(0,l.jsx)(n.li,{children:"Complex types: Array, Map, Struct"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"internal-vs-external-table",children:"Internal vs external table"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Hive manages interanl but non external"}),"\n",(0,l.jsx)(n.li,{children:"Drop internal delete metadata and path, but drop external remove only metadata"}),"\n",(0,l.jsxs)(n.li,{children:["Internal support archive, unarchive, ACID/transactional and ",(0,l.jsx)(n.strong,{children:"result caching ??"})," but none of there features are supported by an external"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>d});var s=i(6540);const l={},r=s.createContext(l);function t(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);