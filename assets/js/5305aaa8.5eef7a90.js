"use strict";(self.webpackChunktestdoc=self.webpackChunktestdoc||[]).push([[7715],{2680:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"big-data/Apache Kafka/stream","title":"Kafka streams","description":"- Record: is key-value pair","source":"@site/docs/big-data/Apache Kafka/stream.md","sourceDirName":"big-data/Apache Kafka","slug":"/big-data/Apache Kafka/stream","permalink":"/Docs/docs/big-data/Apache Kafka/stream","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/big-data/Apache Kafka/stream.md","tags":[],"version":"current","frontMatter":{},"sidebar":"bigdataSidebar","previous":{"title":"security","permalink":"/Docs/docs/big-data/Apache Kafka/security"},"next":{"title":"basics","permalink":"/Docs/docs/big-data/Apache Spark/basics"}}');var r=s(4848),l=s(8453);const t={},c="Kafka streams",a={},d=[{value:"Concepts",id:"concepts",level:2},{value:"Time",id:"time",level:3},{value:"State",id:"state",level:3},{value:"Windowing",id:"windowing",level:3},{value:"Processing grantee",id:"processing-grantee",level:3}];function o(e){const n={a:"a",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"kafka-streams",children:"Kafka streams"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Record:"})," is key-value pair"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Stream partitions"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Tasks"})}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Consume -> Process -> Produce"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"Data stream:"})})," unbounded dataset (unfinite or ever growing)"]}),"\n",(0,r.jsxs)(n.li,{children:["Envent streams features:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"They are ordred (card ex : put money, send, recover...)"}),"\n",(0,r.jsx)(n.li,{children:"Immutable data record (ex: fincancial transaction can not be modfied)"}),"\n",(0,r.jsx)(n.li,{children:"Are relayable"}),"\n",(0,r.jsx)(n.li,{children:"Fault-tolerant"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Three paradigms:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Request-Response (online trasaction processing OLAP)"}),"\n",(0,r.jsx)(n.li,{children:"Bash-processing"}),"\n",(0,r.jsx)(n.li,{children:"Stream-processing"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"concepts",children:"Concepts"}),"\n",(0,r.jsx)(n.h3,{id:"time",children:"Time"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Event time:"})," time where event occured. Kafka add automatically the current time to producer record"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Log append time:"})," time event arrived to Kafka borker"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Processing time:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Time at which sytem processing received data to perform some calculation"}),"\n",(0,r.jsx)(n.li,{children:"Two threads of same application can have different processing time"}),"\n",(0,r.jsx)(n.li,{children:"Higly unreliable and best avoided"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"PS:"})})," when usign time, time zone should be standardized over the application"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Time windows:"})," operations happen on slices of time"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"state",children:"State"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Information stored between events"}),"\n",(0,r.jsx)(n.li,{children:"Can be Local or internal state: accesible only by steaming application instance"}),"\n",(0,r.jsx)(n.li,{children:"External state (database, cache system,...)"}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Design pattern"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Single event processing"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Two APIs"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Low level Processor"}),"\n",(0,r.jsx)(n.li,{children:"High Level Stream DSL"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"1- StreamBuilder: create topology (DAG), which is a serie of transformations\r\n2- KafkaStream: execute object from topology. will start multiple threads,each applying the processing topology to events in the stream"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Stream:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Uunbouded, countinous real-time flow of records"}),"\n",(0,r.jsx)(n.li,{children:"Like topic, consists of one or many partitions"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Tolology: processing logic where"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Node: Stream processor"}),"\n",(0,r.jsx)(n.li,{children:"Edge: stream"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"State:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"Stateless:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Independent from the processing of the other message"}),"\n",(0,r.jsx)(n.li,{children:"Don't require state store"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"Stateful:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Depends from other messages, its used when we need to join, aggregate or window input data"}),"\n",(0,r.jsx)(n.li,{children:"It requires state store"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"State Store"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"State store are fault-tolerent, kafka will restore all state store prior to resuming"}),"\n",(0,r.jsx)(n.li,{children:"Used to store and query the data"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"KStream:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Insert only"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"KTable:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Upsert (insert and update it the record exists)"}),"\n",(0,r.jsxs)(n.li,{children:["Key when value are ",(0,r.jsx)(n.strong,{children:"null"}),", those key are deleted"]}),"\n",(0,r.jsx)(n.li,{children:"Read from a subset topic's partitions"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"GlobalKTable"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Upsert mode"}),"\n",(0,r.jsx)(n.li,{children:"Reads from all topic's partitions"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Stream application do not run inside the broker, it runs on the client JVM"}),"\n",(0,r.jsx)(n.li,{children:"We can run many instances of an application"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Processor topology:"})," the strategy which allows to compute data (is graph)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"windowing",children:"Windowing"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Grace perdiod: indicates when the window result is final"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Out-of-order: if a record arrive after grace period (record.ts > window.end.time + grace.period) it'll discared and not processed"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Window types"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Tumbling"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Hopping"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Sliding"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Session"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Prime use area is user behavior analysis"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"processing-grantee",children:"Processing grantee"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"At-least-once:"})," records are nerver lost but may be delivred"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Exactly-once:"}),": records are processed only once"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://kafka-tutorials.confluent.io/changing-serialization-format/kstreams.html",children:"https://kafka-tutorials.confluent.io/changing-serialization-format/kstreams.html"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>c});var i=s(6540);const r={},l=i.createContext(r);function t(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);