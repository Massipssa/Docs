"use strict";(self.webpackChunktestdoc=self.webpackChunktestdoc||[]).push([[9399],{25499:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/indexing_system-96e0894127e634fdfa0be6db8cd59fb6.png"},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var s=i(96540);const t={},a=s.createContext(t);function r(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(a.Provider,{value:n},e.children)}},45458:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/update_insert-0ac7465fba8349e7d7c351769e4e23ee.png"},65615:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"big-data/datalake-archi","title":"datalake-archi","description":"Best practice","source":"@site/docs/big-data/datalake-archi.md","sourceDirName":"big-data","slug":"/big-data/datalake-archi","permalink":"/Docs/docs/next/big-data/datalake-archi","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/big-data/datalake-archi.md","tags":[],"version":"current","frontMatter":{},"sidebar":"bigdataSidebar","previous":{"title":"architecture","permalink":"/Docs/docs/next/big-data/architecture"},"next":{"title":"deltalake","permalink":"/Docs/docs/next/big-data/deltalake"}}');var t=i(74848),a=i(28453);const r={},l=void 0,c={},d=[{value:"Best practice",id:"best-practice",level:2},{value:"Architecture (patterns)",id:"architecture-patterns",level:2},{value:"Drawbacks",id:"drawbacks",level:2},{value:"Example of data ingestion in Uber",id:"example-of-data-ingestion-in-uber",level:2}];function o(e){const n={a:"a",h2:"h2",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"best-practice",children:"Best practice"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Use Event-Sourcing to facilitate backups (store now, analyze later)"}),"\n",(0,t.jsx)(n.li,{children:"Layer data based on user\u2019s skills (data analytic, engendering, ...)"}),"\n",(0,t.jsx)(n.li,{children:"Keep the Datalake open (avoiding vendor lock-in, or overbalance on a single tool or database)"}),"\n",(0,t.jsx)(n.li,{children:"Plan for performance"}),"\n",(0,t.jsxs)(n.li,{children:["See the ",(0,t.jsx)(n.a,{href:"https://www.upsolver.com/blog/four-principles-data-lake-architecture",children:"link"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"architecture-patterns",children:"Architecture (patterns)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Datalake"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Pros:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Store raw data"}),"\n",(0,t.jsx)(n.li,{children:"Store different type of data (structured, semi and non-structured)"}),"\n",(0,t.jsx)(n.li,{children:"Allows flexibly"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Cons:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Multiples issues of data quality"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Lambda"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Batch layer"}),"\n",(0,t.jsx)(n.li,{children:"Realtime layer"}),"\n",(0,t.jsx)(n.li,{children:"Serving layer"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Kappa"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Simplify lamda architecture by fusionionning batch realtime layers"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Partitioning"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Enables efficient data filtering and retrieval, as queries can skip irrelevant partitions during processing,\r\nwhich is also referred to as data pruning."}),"\n",(0,t.jsx)(n.li,{children:"Choose frequently used columns"}),"\n",(0,t.jsxs)(n.li,{children:["Two types","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Static"}),"\n",(0,t.jsx)(n.li,{children:"Dynamic"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Partition size should be balanced to avoid data skew"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Bucketing"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Bucketing improves query performance by grouping similar data together and reducing the number of files\r\nto scan during processing"}),"\n",(0,t.jsx)(n.li,{children:"Reduce the number of files to scan and improves data locality"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"drawbacks",children:"Drawbacks"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Do not enforce data quality"}),"\n",(0,t.jsx)(n.li,{children:"Do not support transactions"}),"\n",(0,t.jsx)(n.li,{children:"Lake of consistency and isolation"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"example-of-data-ingestion-in-uber",children:"Example of data ingestion in Uber"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Decouple storage from query layer, each can be scaled independently"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Two dataset types"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Append-only"}),"\n",(0,t.jsx)(n.li,{children:"Append-plus-update"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Challenges"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Not read the hole dataset"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Spread across multiple files within partitions to leverage high parallelism during writes and in case\r\nof files updates, limiting write footprint only to the files containing these updates"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["For efficient updates: lookup tool (",(0,t.jsx)("u",{children:"lookup table"}),") for location of the data with the Big data platform\r\n",(0,t.jsx)(n.img,{alt:"update_insert",src:i(45458).A+"",width:"601",height:"531"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["The indexing system that maybe used ",(0,t.jsx)(n.strong,{children:"HBase"})," or ",(0,t.jsx)(n.strong,{children:"Cassandra"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Hbase vs Cassandra"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"HBase permits consistency on reads and writes. No need to tweak consistency parameter as is done in cassandra"}),"\n",(0,t.jsx)(n.li,{children:"HBase provides automatic re-balancing of tables within a cluster"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"indexing_system",src:i(25499).A+"",width:"681",height:"282"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["See the ",(0,t.jsx)(n.a,{href:"https://eng.uber.com/data-partitioning-global-indexing/",children:"link"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);