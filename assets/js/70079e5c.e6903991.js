"use strict";(self.webpackChunktestdoc=self.webpackChunktestdoc||[]).push([[2023],{808:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"big-data/File-formats/apache-parquet","title":"Apache Parquet","description":"- Columnar oriented","source":"@site/docs/big-data/File-formats/apache-parquet.md","sourceDirName":"big-data/File-formats","slug":"/big-data/File-formats/apache-parquet","permalink":"/Docs/docs/big-data/File-formats/apache-parquet","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/big-data/File-formats/apache-parquet.md","tags":[],"version":"current","frontMatter":{},"sidebar":"bigdataSidebar","previous":{"title":"Apache Avro","permalink":"/Docs/docs/big-data/File-formats/apache-avro"},"next":{"title":"architecture","permalink":"/Docs/docs/big-data/architecture"}}');var s=r(4848),a=r(8453);const i={},o="Apache Parquet",l={},c=[{value:"File Structure",id:"file-structure",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"apache-parquet",children:"Apache Parquet"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Columnar oriented"}),"\n",(0,s.jsx)(n.li,{children:"Self-describing: metadata including schema and structure is embedded within a file"}),"\n",(0,s.jsxs)(n.li,{children:["Advantages:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Compression"}),"\n",(0,s.jsx)(n.li,{children:"Encoding"}),"\n",(0,s.jsx)(n.li,{children:"Optimize I/O"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"file-structure",children:"File Structure"}),"\n",(0,s.jsx)(n.p,{children:"A Parquet file is divided into row groups, column chunks, and pages:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Parquet File\r\n \u251c\u2500\u2500 Row Group 1\r\n \u2502     \u251c\u2500\u2500 Column Chunk (col1)\r\n \u2502     \u2502      \u251c\u2500\u2500 Page 1\r\n \u2502     \u2502      \u251c\u2500\u2500 Page 2\r\n \u2502     \u2502      ...\r\n \u2502     \u251c\u2500\u2500 Column Chunk (col2)\r\n \u2502     \u2502      \u251c\u2500\u2500 Page 1\r\n \u2502     \u2502      \u251c\u2500\u2500 Page 2\r\n \u2502     ...\r\n \u251c\u2500\u2500 Row Group 2\r\n \u2502     \u251c\u2500\u2500 Column Chunk (col1)\r\n \u2502     \u251c\u2500\u2500 Column Chunk (col2)\r\n \u2502     ...\r\n \u2514\u2500\u2500 File Footer (schema + metadata)\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Row group"}),"\r\nA horizontal partition of the data. Typically, a few MBs (default ~128MB). Each row group contains all the columns for a\r\nsubset of rows."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"!!! info\r\nThis allows parallelism: different executors can process different row groups."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Column chunk"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Within a row group, each column is stored separately in a column chunk."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Page"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The smallest unit of storage. Usually 8KB\u20131MB. Two main types:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Data Page:"})," actual values."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Dictionary Page:"})," optional; maps repeated values to dictionary indexes for compression."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"File footer"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Stored at the end of the file. Contains schema, metadata (e.g., column types, encoding, statistics like min/max/null counts)."}),"\n",(0,s.jsx)(n.p,{children:"!!! tip\r\nThis metadata is powerful: query engines can use it for predicate pushdown\r\n(skip reading row groups where min > filter_value or max < filter_value)."})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>o});var t=r(6540);const s={},a=t.createContext(s);function i(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);