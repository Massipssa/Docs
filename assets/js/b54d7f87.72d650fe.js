"use strict";(self.webpackChunktestdoc=self.webpackChunktestdoc||[]).push([[8380],{28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>d});var i=s(96540);const r={},l=i.createContext(r);function t(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:n},e.children)}},86188:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"big-data/zookeeper/concepts","title":"Zookeeper","description":"- Enables coordination in distributed systems","source":"@site/docs/big-data/zookeeper/concepts.md","sourceDirName":"big-data/zookeeper","slug":"/big-data/zookeeper/concepts","permalink":"/Docs/docs/next/big-data/zookeeper/concepts","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/big-data/zookeeper/concepts.md","tags":[],"version":"current","frontMatter":{},"sidebar":"bigdataSidebar","previous":{"title":"to-read","permalink":"/Docs/docs/next/big-data/to-read"}}');var r=s(74848),l=s(28453);const t={},d="Zookeeper",o={},c=[{value:"Components",id:"components",level:2},{value:"Znode",id:"znode",level:3},{value:"Config",id:"config",level:2},{value:"Commands",id:"commands",level:3},{value:"Election",id:"election",level:3},{value:"Useful links",id:"useful-links",level:3}];function a(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"zookeeper",children:"Zookeeper"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Enables coordination in distributed systems"}),"\n",(0,r.jsx)(n.li,{children:"Main cluster state and notify any changes"}),"\n",(0,r.jsxs)(n.li,{children:["Needed to:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Manage configuration around the cluster"}),"\n",(0,r.jsx)(n.li,{children:"Have leader to perform updates, writes, ..."}),"\n",(0,r.jsx)(n.li,{children:"Lock resources"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Challenges of Distributed Applications","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"Race condition:"})})," two machines try to perform a task, which should be performed by one machine"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"Deadlock:"})})," two or more operations waiting other to complete"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"Inconsistency:"})})," partial failure of data"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"components",children:"Components"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Client:"})," sends heartbeats to inform the server that is alive"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Server:"})," sends acknowledgment"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Zookeeper ensemble:"})," set of servers. Minimum nodes required to form assemble is 3"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Leader:"})," recover failed nodes"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Follower:"})," follows leader instructions"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Namespaces:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Znode:"})," each node have ",(0,r.jsx)(n.strong,{children:"name"})," and ",(0,r.jsx)(n.strong,{children:"sequence of path"})," separated by (/)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Config:"})," centralized configuration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Workers:"})," used for naming"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Data model"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["stat","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Version number"}),"\n",(0,r.jsx)(n.li,{children:"ACL"}),"\n",(0,r.jsx)(n.li,{children:"Timestamp"}),"\n",(0,r.jsx)(n.li,{children:"Data length"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"znode",children:"Znode"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Maintain a stats structure"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Can store data and have children at same time"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Stores information (last version, transaction Id of last transaction, ...)"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Have ACL (create, write, read, delete and admin)"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Support authentication username / password"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Client can set ",(0,r.jsx)(n.strong,{children:"watcher"})," on znode to get notified when change occurs"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Data change"}),"\n",(0,r.jsx)(n.li,{children:"Change an any znode"}),"\n",(0,r.jsx)(n.li,{children:"Child znode created or deleted"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Types"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Persistence:"})," permanent node they are only deleted manually (default)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ephemeral:"})," delete by Zookeeper when (-e flag to create)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Client who created it close the session"}),"\n",(0,r.jsx)(n.li,{children:"No request from client after timeout session (use by Kafka to maintain brokers)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sequential:"})," same as ephemeral just Zoopkeeper assigns number of 10 digits during the creation and increment\r\nthis number when other sequential is created (-s flag to create)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Session:"})," create between client and zookeeper"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Client sends heartbeats"}),"\n",(0,r.jsx)(n.li,{children:"Fails If no heartbeat was sent after certain period (timeout)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Watchers: mechanism used by client to get changes in Zookeeper"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"config",children:"Config"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["server.X=hostname:peerPort",":leaderPort"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"X:"})," should be integer"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"hostname:"})," ip of the host"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"peerPort:"})," port on which ensemble communicates"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"leaderPort:"})," port used to elect leader"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"clientPort:"})," port used to communicate with client"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["If leader goes down => followers store are notified and store the latest change in ",(0,r.jsx)(n.strong,{children:"cluster data storage"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"commands",children:"Commands"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Create:"})," ",(0,r.jsx)(n.code,{children:'create /znode_test "this is the data of the znode_test"'})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Get:"})," ",(0,r.jsx)(n.code,{children:"get /znode_test"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Create child:"})," ",(0,r.jsx)(n.code,{children:'create /znode_test/child_1 "this is the data of chid_1"'})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Delete:"})," ",(0,r.jsx)(n.code,{children:"delete /znode_test/child_1"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Get ACL:"})," ",(0,r.jsx)(n.code,{children:"getAcl /znode_test"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"election",children:"Election"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Herd effet"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"useful-links",children:"Useful links"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://medium.com/@bikas.katwal10/zookeeper-introduction-designing-a-distributed-system-using-zookeeper-and-java-7f1b108e236e",children:"Link-1"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);