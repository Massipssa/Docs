"use strict";(self.webpackChunktestdoc=self.webpackChunktestdoc||[]).push([[443],{8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>c});var s=i(6540);const l={},r=s.createContext(l);function t(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),s.createElement(r.Provider,{value:n},e.children)}},8781:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"cloud/aws/Storage/s3","title":"S3 (Simple Storage Service)","description":"- Store file or object","source":"@site/docs/cloud/aws/01-Storage/s3.md","sourceDirName":"cloud/aws/01-Storage","slug":"/cloud/aws/Storage/s3","permalink":"/Docs/docs/cloud/aws/Storage/s3","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/cloud/aws/01-Storage/s3.md","tags":[],"version":"current","frontMatter":{},"sidebar":"cloudSidebar","previous":{"title":"Elastic File System (EFS)","permalink":"/Docs/docs/cloud/aws/Storage/efs"},"next":{"title":"storage-gateway","permalink":"/Docs/docs/cloud/aws/Storage/storage-gateway"}}');var l=i(4848),r=i(8453);const t={},c="S3 (Simple Storage Service)",o={},d=[{value:"Storage classes",id:"storage-classes",level:2},{value:"Versioning",id:"versioning",level:2},{value:"Management Lifecycle Rules",id:"management-lifecycle-rules",level:2},{value:"Object Lock",id:"object-lock",level:2},{value:"S3 Replication (Cross Region Replication)",id:"s3-replication-cross-region-replication",level:2},{value:"MFA delete",id:"mfa-delete",level:2},{value:"Tags",id:"tags",level:2},{value:"Requester Pays",id:"requester-pays",level:2},{value:"Event Notifications",id:"event-notifications",level:2},{value:"Performance",id:"performance",level:2},{value:"Security",id:"security",level:2},{value:"Encryption",id:"encryption",level:2},{value:"ACLs",id:"acls",level:2},{value:"Bucket policies",id:"bucket-policies",level:2},{value:"S3 Object Lambda",id:"s3-object-lambda",level:2},{value:"Princing",id:"princing",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"s3-simple-storage-service",children:"S3 (Simple Storage Service)"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Store file or object"}),"\n",(0,l.jsxs)(n.li,{children:["Define at region level","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Naming convention"}),"\n",(0,l.jsx)(n.li,{children:"No uppercase"}),"\n",(0,l.jsx)(n.li,{children:"No underscore"}),"\n",(0,l.jsx)(n.li,{children:"3-63 char long"}),"\n",(0,l.jsx)(n.li,{children:"Not an IP"}),"\n",(0,l.jsx)(n.li,{children:"Must start with lowercase letter or number"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"Objects (files) have Key. Key is the FULL path"}),"\n",(0,l.jsxs)(n.li,{children:["No concept of ",(0,l.jsx)(n.strong,{children:"directories"})]}),"\n",(0,l.jsxs)(n.li,{children:["Size:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Max size of object ",(0,l.jsx)(n.strong,{children:"5TB"})]}),"\n",(0,l.jsxs)(n.li,{children:["If uploading more thant ",(0,l.jsx)(n.strong,{children:"5GB"}),", must use ",(0,l.jsx)(n.strong,{children:"mutli-part upload"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"Object have metadata (list of test key-value pairs)"}),"\n",(0,l.jsx)(n.li,{children:"Object have Tag (Unicode key-value pair up to 10), useful for security and lifecycle"}),"\n",(0,l.jsx)(n.li,{children:"Version ID (if versioning is enabled)"}),"\n",(0,l.jsx)(n.li,{children:"Support any formats (bin, parquet, csv, ...)"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"storage-classes",children:"Storage classes"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Standard"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"High availability and durability (>= 3 AZ)"}),"\n",(0,l.jsx)(n.li,{children:"Designed for frequent access"}),"\n",(0,l.jsx)(n.li,{children:"Suitable for most workloads"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Standard-IA"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Less frequently and rapid access"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"One Zone Infrequent Access"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Like ",(0,l.jsx)(n.strong,{children:"Standard-IA"})," but data is stored in single AZ"]}),"\n",(0,l.jsx)(n.li,{children:"Cost less 20% than standard-IA"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Intelligent-Tiering"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Some time accessed frequently and sometime not"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Glacier"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Glacier Instant Retrieval:"})," provides long-term archiving data with instant retrieval time for your data"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Glacier Flexible Retrieval:"})," ideal storage class for archive data that does not require immediate access but needs","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Expedited (1 to 5 minutes)"}),"\n",(0,l.jsx)(n.li,{children:"Standard (3 to 5 hours)"}),"\n",(0,l.jsx)(n.li,{children:"Bulk (5 to 12 hours)\r\nflexibility to retrieve large sets of data at no cost, such as backup or disaster recovery use case.Can be up minutes\r\nor up to 12 hours"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Glacier Deep Retrieval:"})," cheapest storage class and designed for customers that retain data sets for 7-10 years","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Standard (12 hours)"}),"\n",(0,l.jsx)(n.li,{children:"Bulk (48 hours)\r\nor longer to meet customer needs and regulator compliance requirements. The standard retrieval time is 12 hours, and\r\nthe bulk retrieval time is 48 hours"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"versioning",children:"Versioning"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Enable in bucket level"}),"\n",(0,l.jsxs)(n.li,{children:["Same Key overwrite will increment the ",(0,l.jsx)(n.strong,{children:"version"}),": 1, 2, 3"]}),"\n",(0,l.jsxs)(n.li,{children:["It is best practice to version your buckets","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Protect against unintended deletes (ability to restore a version)"}),"\n",(0,l.jsx)(n.li,{children:"Easy roll back to previous version"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Any file that is not versioned prior to enabling versioning will have version ",(0,l.jsx)(n.strong,{children:"null"})]}),"\n",(0,l.jsxs)(n.li,{children:["You can ",(0,l.jsx)(n.strong,{children:"suspend"})," versioning"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"management-lifecycle-rules",children:"Management Lifecycle Rules"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Set of rules to move data between different tiers, to save storage cost"}),"\n",(0,l.jsx)(n.li,{children:"Can be used in conjunction with versionning"}),"\n",(0,l.jsx)(n.li,{children:"Can be applied to the current versions and previous versions"}),"\n",(0,l.jsxs)(n.li,{children:["Example: ",(0,l.jsx)(n.code,{children:"General Purpose --\x3e Infrequent Access --\x3e Glacier"})]}),"\n",(0,l.jsxs)(n.li,{children:["Actions:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Transaction Actions"}),": configure objects to transition to another storage class"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Expiration Actions"}),": configure object to expire (delete) after some time"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"Rules can be created for a certain prefix (s3://bucketname/test/*)"}),"\n",(0,l.jsx)(n.li,{children:"Rules can be created for certain objects Tags"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"object-lock",children:"Object Lock"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Compliance mode"}),"\n",(0,l.jsx)(n.li,{children:"Governance mode"}),"\n",(0,l.jsx)(n.li,{children:"Legal Hold ??"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"s3-replication-cross-region-replication",children:"S3 Replication (Cross Region Replication)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Move bucket from one region to another"}),"\n",(0,l.jsxs)(n.li,{children:["Must enable versioning (",(0,l.jsx)(n.strong,{children:"source and destination"}),")"]}),"\n",(0,l.jsx)(n.li,{children:"Buckets must be in different AWS regions"}),"\n",(0,l.jsx)(n.li,{children:"Can be in different accounts"}),"\n",(0,l.jsx)(n.li,{children:"Copying is async"}),"\n",(0,l.jsx)(n.li,{children:"Must give proper IAM permissions to S3"}),"\n",(0,l.jsxs)(n.li,{children:["Only new objects are replicated, to enable for existing object use ",(0,l.jsx)(n.strong,{children:"S3 Batch Replication"})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"mfa-delete",children:"MFA delete"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Ensures users cannot delete objects from a bucket unless they provided their MFA code"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"tags",children:"Tags"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"How do you verify if a file has already been uploaded to S3"}),"\n",(0,l.jsxs)(n.li,{children:["Names work, but how are you sure the file is ",(0,l.jsx)(n.strong,{children:"exactly"})," the same ?"]}),"\n",(0,l.jsxs)(n.li,{children:["For this, you can use AWS ETags:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["For simple uploads (less than ",(0,l.jsx)(n.strong,{children:"5GB"}),"), it's the ",(0,l.jsx)(n.strong,{children:"MD5"})," hash"]}),"\n",(0,l.jsx)(n.li,{children:"For Multi-part uploads, it's more complicated, no need to know the algorithm"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Using a tag, we can ensure ",(0,l.jsx)(n.strong,{children:"integrity"})," of files"]}),"\n",(0,l.jsx)(n.li,{children:"Delete markers aren't replicated by default"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"requester-pays",children:"Requester Pays"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"The requester instead of the bucket owner pays the cost of the request and the data download from the bucket"}),"\n",(0,l.jsx)(n.li,{children:"The requester must be authenticated in AWS (cannot be anonymous)"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"event-notifications",children:"Event Notifications"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"React to events that are happening in S3 (create, delete, ... object)"}),"\n",(0,l.jsx)(n.li,{children:"We need to have IAM Permissions"}),"\n",(0,l.jsxs)(n.li,{children:["Targets","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"SNS"}),"\n",(0,l.jsx)(n.li,{children:"SQS"}),"\n",(0,l.jsx)(n.li,{children:"Lambda Function"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"EventBridge can also be used"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"performance",children:"Performance"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Multi-Part upload"}),"\n",(0,l.jsx)(n.li,{children:"S3 Transfer accelerator"}),"\n",(0,l.jsx)(n.li,{children:"Byte Range Fetch"}),"\n",(0,l.jsx)(n.li,{children:"S3 Select & Glacier Select"}),"\n",(0,l.jsxs)(n.li,{children:["S3 Batch Operations: perform bulk operations on existing S3 objects with a single request, example:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"modify object metadata"}),"\n",(0,l.jsx)(n.li,{children:"Copy objects between S3 buckets"}),"\n",(0,l.jsx)(n.li,{children:"Encrypt un-encrypted objects"}),"\n",(0,l.jsx)(n.li,{children:"Modify ACLs, tags"}),"\n",(0,l.jsx)(n.li,{children:"Restore objects from S3 Glacier"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"Prefix: spread our reads across multiple prefixes"}),"\n",(0,l.jsx)(n.li,{children:"KMS come in with limits"}),"\n",(0,l.jsx)(n.li,{children:"Multipart upload"}),"\n",(0,l.jsx)(n.li,{children:"S3 Byte range fetches"}),"\n",(0,l.jsx)(n.li,{children:"S3 Analytics ??"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"security",children:"Security"}),"\n",(0,l.jsx)(n.h2,{id:"encryption",children:"Encryption"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"At rest: Server-side encryption"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["SSE-S3:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Encryption using keys handled, managed and owned by AWS"}),"\n",(0,l.jsx)(n.li,{children:"Object is encrypted server-side"}),"\n",(0,l.jsx)(n.li,{children:"Encryption type is AES-256"}),"\n",(0,l.jsxs)(n.li,{children:["Must set header ",(0,l.jsx)(n.strong,{children:'"x-amz-server-side-encryption": "AES256"'})]}),"\n",(0,l.jsx)(n.li,{children:"Enabled by default for new buckets and new objects"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["SSE-KMS","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Encryption using keys handled and managed by AWS KMS"}),"\n",(0,l.jsx)(n.li,{children:"??"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"SSE-C: customer provide keys"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"At rest: Client-side encryption"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"You encrypt your files before uploading them to S3"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"In transit"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"SSL/TLS"}),"\n",(0,l.jsx)(n.li,{children:"HTTPS"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"acls",children:"ACLs"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Works on individual object level"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"bucket-policies",children:"Bucket policies"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Works on entire bucket level"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"s3-object-lambda",children:"S3 Object Lambda"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Use to change object before it is retrieved by the caller application"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"princing",children:"Princing"}),"\n",(0,l.jsx)(n.p,{children:"You don't pay for data:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"In"})," to S3 from the internet"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Out"})," to EC2 in the same region"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Out"})," to CloudFront"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}}}]);