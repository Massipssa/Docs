"use strict";(self.webpackChunktestdoc=self.webpackChunktestdoc||[]).push([[6351],{8432:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>o,frontMatter:()=>l,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"big-data/Apache Iceberg/production","title":"Internal Iceberg Metadata ables","description":"- Internal Iceberg Metadata ables","source":"@site/docs/big-data/Apache Iceberg/production.md","sourceDirName":"big-data/Apache Iceberg","slug":"/big-data/Apache Iceberg/production","permalink":"/Docs/docs/next/big-data/Apache Iceberg/production","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/big-data/Apache Iceberg/production.md","tags":[],"version":"current","frontMatter":{},"sidebar":"bigdataSidebar","previous":{"title":"Time travel","permalink":"/Docs/docs/next/big-data/Apache Iceberg/features/time-travel"},"next":{"title":"Reading and Writing in Apache Iceberg","permalink":"/Docs/docs/next/big-data/Apache Iceberg/read-write"}}');var s=a(74848),i=a(28453);const l={},r="Internal Iceberg Metadata ables",d={},c=[{value:"history metadata table",id:"history-metadata-table",level:2},{value:"metadata_log_entries metadata table",id:"metadata_log_entries-metadata-table",level:2},{value:"snapshot metadata table",id:"snapshot-metadata-table",level:2},{value:"files table",id:"files-table",level:2},{value:"manifests metadata table",id:"manifests-metadata-table",level:2},{value:"partitions  metadata table",id:"partitions--metadata-table",level:2},{value:"all_data_files metadata table",id:"all_data_files-metadata-table",level:2},{value:"all_manifests metadata table",id:"all_manifests-metadata-table",level:2},{value:"ref metadata table",id:"ref-metadata-table",level:2},{value:"entries metadata table",id:"entries-metadata-table",level:2}];function h(e){const t={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"internal-iceberg-metadata-ables",children:"Internal Iceberg Metadata ables"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"#internal-iceberg-metadata-ables",children:"Internal Iceberg Metadata ables"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"#history-metadata-table",children:"history metadata table"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"#metadata_log_entries-metadata-table",children:"metadata_log_entries metadata table"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"#snapshot-metadata-table",children:"snapshot metadata table"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"#files-table",children:"files table"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"#manifests-metadata-table",children:"manifests metadata table"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"#partitions--metadata-table",children:"partitions  metadata table"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"#all_data_files-metadata-table",children:"all_data_files metadata table"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"#all_manifests-metadata-table",children:"all_manifests metadata table"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"#ref-metadata-table",children:"ref metadata table"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"#entries-metadata-table",children:"entries metadata table"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"history-metadata-table",children:"history metadata table"}),"\n",(0,s.jsx)(t.p,{children:"Records the table's evolution. It can be used for data recovery and version control and as well as to indentify table rollbacks.\r\nIn case of errors of issues users can refer to snapshot history table to retrieve the ealier versions of data. By querying the table to get the snapshot before the disaster. The table can be rollback using the snapshot id."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-markdonw",children:"+-----------------------+-------------------+---------+-------------------+\r\n|made_current_at        |snapshot_id        |parent_id|is_current_ancestor|\r\n+-----------------------+-------------------+---------+-------------------+\r\n|2025-11-02 18:56:18.548|8206813798540384639|null     |true               |\r\n+-----------------------+-------------------+---------+-------------------+\n"})}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Column"}),(0,s.jsx)(t.th,{children:"Definition"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"made_current_at"}),(0,s.jsx)(t.td,{children:"timestamp when the snapshots was made. Gives a precise marker when the changes to the table were committed"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"snapshot_id"}),(0,s.jsx)(t.td,{children:"unique identifier for each snapshot. It enables to track and reference a specific  snapshos within table's hsitory"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"parent_id"}),(0,s.jsx)(t.td,{children:"unique id of parent snapshot of the current snapshot. This allows you to visualize how each snapshot is connected, making it easier to follow the table\u2019s evolution over time."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"is_current_ancestor"}),(0,s.jsx)(t.td,{children:"indicates whether the snapshot is an ancetor of the table or not"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"metadata_log_entries-metadata-table",children:"metadata_log_entries metadata table"}),"\n",(0,s.jsx)(t.p,{children:"Track the evolution of the table by logging the metadata generated during table updates."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"+-----------------------+-------------------------------------------------------------------------------------------+-------------------+----------------+----------------------+\r\n|timestamp              |file                                                                                       |latest_snapshot_id |latest_schema_id|latest_sequence_number|\r\n+-----------------------+-------------------------------------------------------------------------------------------+-------------------+----------------+----------------------+\r\n|2025-11-02 18:56:18.548|warehouse/ecommerce_db/consumers1/metadata/v1.metadata.json                                |8206813798540384639|0               |1                     |\r\n+-----------------------+-------------------------------------------------------------------------------------------+-------------------+----------------+----------------------+\n"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.strong,{children:"timestamp"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.strong,{children:"file"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.strong,{children:"latest_snapshot_id"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.strong,{children:"latest_schema_id"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.strong,{children:"latest_sequence_number"})}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"snapshot-metadata-table",children:"snapshot metadata table"}),"\n",(0,s.jsxs)(t.p,{children:["Tracks datasets ",(0,s.jsx)(t.strong,{children:"versions"})," and ",(0,s.jsx)(t.strong,{children:"histories"})]}),"\n",(0,s.jsx)(t.h2,{id:"files-table",children:"files table"}),"\n",(0,s.jsx)(t.p,{children:"The Files Metadata Table lists all current data files in an Iceberg table and provides rich details about each one\u2014including file location, format, size, partition values, and content metadata.\r\nThis table is a core component of Iceberg, enabling fine-grained data processing, precise schema management, robust lineage tracking, and strong data-quality controls. It gives users deep visibility into how data is physically stored and managed."}),"\n",(0,s.jsx)(t.p,{children:"Typical use cases include:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Determining whether a partition needs to be rewritten"}),"\n",(0,s.jsx)(t.li,{children:"Identifying partitions that require repair"}),"\n",(0,s.jsx)(t.li,{children:"Calculating the total size of a snapshot"}),"\n",(0,s.jsx)(t.li,{children:"Retrieving the list of files belonging to a previous snapshot"}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Column"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"content"}),(0,s.jsx)(t.td,{children:"type of the file (0: for data file, 1 position delete file, 2 for equality delete file)"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"file_path"}),(0,s.jsx)(t.td,{children:"exacte location of data file to facilitate access to file when needed"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"file_format"}),(0,s.jsx)(t.td,{children:"indicates the format of the file  like PARQUET, AVRO, ORC"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"spec_id"}),(0,s.jsx)(t.td,{children:"indicates the format of the file  like PARQUET, AVRO, ORC"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"partition"}),(0,s.jsx)(t.td,{children:"indicates the format of the file  like PARQUET, AVRO, ORC"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"record_count"}),(0,s.jsx)(t.td,{children:"the number of records contained within each file"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"file_size_in_bytes"}),(0,s.jsx)(t.td,{children:"the total size of file in bytes"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"column_sizes"}),(0,s.jsx)(t.td,{children:"the size of each individual column"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"value_counts"}),(0,s.jsxs)(t.td,{children:["provides count of ",(0,s.jsx)(t.strong,{children:"non-null"})," values in each column"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"null_value_counts"}),(0,s.jsxs)(t.td,{children:["provides count of ",(0,s.jsx)(t.strong,{children:"nnull"})," values in each column"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"nan_value_counts"}),(0,s.jsxs)(t.td,{children:["provides count of ",(0,s.jsx)(t.strong,{children:"NaN (Not a Number)"})," values in each column"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"lower_bounds"}),(0,s.jsx)(t.td,{children:"minumun values in each column"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"upper_bounds"}),(0,s.jsx)(t.td,{children:"maximum values in each column"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"key_metadata"}),(0,s.jsx)(t.td,{children:"indicates the format of the file  like PARQUET, AVRO, ORC"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"split_offsets"}),(0,s.jsx)(t.td,{children:"indicates the format of the file  like PARQUET, AVRO, ORC"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"equality_ids"}),(0,s.jsx)(t.td,{children:"indicates the format of the file  like PARQUET, AVRO, ORC"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"sort_order_id"}),(0,s.jsx)(t.td,{children:"indicates the format of the file  like PARQUET, AVRO, ORC"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"readable_metrics"}),(0,s.jsxs)(t.td,{children:["human-readable representation of the file\u2019s metadata including ",(0,s.jsx)(t.strong,{children:"column size"}),", ",(0,s.jsx)(t.strong,{children:"value counts"}),", ",(0,s.jsx)(t.strong,{children:"null counts"}),", and ",(0,s.jsx)(t.strong,{children:"lower and upper bounds"})]})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"manifests-metadata-table",children:"manifests metadata table"}),"\n",(0,s.jsx)(t.h2,{id:"partitions--metadata-table",children:"partitions  metadata table"}),"\n",(0,s.jsx)(t.h2,{id:"all_data_files-metadata-table",children:"all_data_files metadata table"}),"\n",(0,s.jsxs)(t.p,{children:["Provides  comprehensive details about every datafile across all valid snapshots in the table",(0,s.jsx)(t.br,{}),"\n","Helps to:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Finding the largest table across all snapshots,"}),"\n",(0,s.jsx)(t.li,{children:"Finding the total file size across all snapshots,"}),"\n",(0,s.jsx)(t.li,{children:"Assessing partitions across snapshots"}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"all_manifests-metadata-table",children:"all_manifests metadata table"}),"\n",(0,s.jsx)(t.h2,{id:"ref-metadata-table",children:"ref metadata table"}),"\n",(0,s.jsx)(t.p,{children:"List all named references within Iceberg table\r\nHelps to understand and manage your table\u2019 snapshot history and retention policy, making it a crucial part of maintaining data versioning and ensuring that your table\u2019s size is under control"}),"\n",(0,s.jsx)(t.p,{children:"Use cases"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"finding references at risk of losing snapshots"}),"\n",(0,s.jsx)(t.li,{children:"finding the latest snapshot of a particular reference."}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Column"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"name"}),(0,s.jsx)(t.td,{children:"unique identifier for the reference"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"type"}),(0,s.jsx)(t.td,{children:"BRANCH: mutable, TAG: immutable"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"snapshot_id"}),(0,s.jsx)(t.td,{})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"max_reference_age_in_ms"}),(0,s.jsx)(t.td,{children:"the maximum duration in milliscondes that a snapshot can be referenced, if the age exceeded the snapshot will be candidates for cleaup during maintenance operation"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"min_snapshots_to_keep"}),(0,s.jsxs)(t.td,{children:["lower limit on the number of snapshot to keep in history table. The number is always maintained even if the ",(0,s.jsx)(t.strong,{children:"max_reference_age_in_ms"})," exceeded"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"max_snapshot_age_in_ms"}),(0,s.jsxs)(t.td,{children:["the maximum age in milliseconds for any snapshot in the table. Snapshots that exceed this age could be removed by the maintenance operations,  unless  they  are  protected  by  the  ",(0,s.jsx)(t.strong,{children:"min_snapshots_to_keep"})," setting"]})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"entries-metadata-table",children:"entries metadata table"}),"\n",(0,s.jsx)(t.p,{children:"Offers  insightful  details  about  each operation  that  has  been  performed on  the  table\u2019s  data  and  deletes  files  across  all snapshots"}),"\n",(0,s.jsx)(t.p,{children:"Use cases"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"identifying files added in a particular snapshot"}),"\n",(0,s.jsx)(t.li,{children:"tracking changes to a file over time"}),"\n",(0,s.jsx)(t.li,{children:"tracking table size changes over time"}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Column"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"status"}),(0,s.jsx)(t.td,{children:"is an integer that indicates whether a file was added or deleted in the snapshot. A value of 0 represents an existing file, while 1 indicates an added file and 2 a deleted file"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"snapshot_id"}),(0,s.jsx)(t.td,{children:"unique  identifier  of  the  snapshot  in  which  the  operation took place"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"sequence_number"}),(0,s.jsx)(t.td,{children:"indicates the order of operations"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"file_sequence_number"}),(0,s.jsx)(t.td,{})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"data_file"}),(0,s.jsx)(t.td,{})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"readable_metrics"}),(0,s.jsx)(t.td,{})]})]})]})]})}function o(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453:(e,t,a)=>{a.d(t,{R:()=>l,x:()=>r});var n=a(96540);const s={},i=n.createContext(s);function l(e){const t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);