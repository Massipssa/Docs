"use strict";(self.webpackChunktestdoc=self.webpackChunktestdoc||[]).push([[5817],{1599:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"cloud/aws/Collection/kinesis/kinesis","title":"Kinesis","description":"1. Kinesis Streams","source":"@site/docs/cloud/aws/Collection/kinesis/kinesis.md","sourceDirName":"cloud/aws/Collection/kinesis","slug":"/cloud/aws/Collection/kinesis/","permalink":"/Docs/docs/cloud/aws/Collection/kinesis/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/cloud/aws/Collection/kinesis/kinesis.md","tags":[],"version":"current","frontMatter":{},"sidebar":"cloudSidebar","previous":{"title":"Global Accelerator","permalink":"/Docs/docs/cloud/aws/Cache/global-accelerator"},"next":{"title":"sns","permalink":"/Docs/docs/cloud/aws/Collection/sns"}}');var r=n(4848),l=n(8453);const t={},a="Kinesis",d={},c=[{value:"1. Kinesis Streams",id:"1-kinesis-streams",level:2},{value:"Kinesis Streams Shards",id:"kinesis-streams-shards",level:3},{value:"Limits",id:"limits",level:3},{value:"2. Kinesis Data Firehose (KDF)",id:"2-kinesis-data-firehose-kdf",level:2},{value:"3. Kinesis Data Streams vs Firehose",id:"3-kinesis-data-streams-vs-firehose",level:2}];function o(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"kinesis",children:"Kinesis"})}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#kinesis",children:"Kinesis Streams"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#firehose",children:"Kinesis Data Firehose (KDF)"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#kinesisvsfirehose",children:"Kinesis Data Streams vs Firehose"})}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"1-kinesis-streams",children:"1. Kinesis Streams"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Goal:"})," low latency streaming ingest at scale"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Streams are divided in ordered Shards / Partitons"}),"\n",(0,r.jsx)(s.li,{children:"Data retention is 24 hours by default, can go up to 7 days"}),"\n",(0,r.jsx)(s.li,{children:"Ability to repocess / replay data"}),"\n",(0,r.jsx)(s.li,{children:"Multiple applications can consume the same stream"}),"\n",(0,r.jsx)(s.li,{children:"Real-time processing with scale of throughput"}),"\n",(0,r.jsx)(s.li,{children:"Once data is insereted in Kinesis, is can't be deleted (immutablity)"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"kinesis-streams-shards",children:"Kinesis Streams Shards"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"One stream is made of one or multiple shards"}),"\n",(0,r.jsx)(s.li,{children:"Billing is per shard provisioned, can have as shards as we want"}),"\n",(0,r.jsx)(s.li,{children:"Batching available or per message calls"}),"\n",(0,r.jsx)(s.li,{children:"Number of shards can evolve over time (reshard, merge)"}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.strong,{children:"Record are not to be ordered globally they'll be ordered per shard"})}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"&quot;records&quot;",src:n(3640).A+"",width:"919",height:"465"})}),"\n",(0,r.jsx)(s.h3,{id:"limits",children:"Limits"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Producer"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"1 MB/s or 1000 messages/s at write PER SHARD"}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"ProvisionedThroughputException"})," otherwise"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Consumer"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"2 MB/s at read PER SHARD accross all consumers"}),"\n",(0,r.jsx)(s.li,{children:"5 API calls per second PER SHARD across all consumers"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Consumer Enhanced Fan-Out"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"2 MB/s at read PER SHARD, PER ENHANCED CONSUMER"}),"\n",(0,r.jsx)(s.li,{children:"No API calls need (push model)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Data Retention"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"24 hours data retention by default"}),"\n",(0,r.jsx)(s.li,{children:"Can be extended to 7 days"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"2-kinesis-data-firehose-kdf",children:"2. Kinesis Data Firehose (KDF)"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Goal:"})," load into S3, Redshift, ELK and Splunk"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Fully Managed Service, no administration"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.em,{children:(0,r.jsx)(s.strong,{children:"Near Real Time"})})," 60 seconds latency mim for non full batches"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Load data into Readshift / Amazon S3 / ElasticSearch / Splunk"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Automtic scaling"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Supports many data formats"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Data Conversions from JSON to Parquet / ORC (Only for S3)"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Data Transformationi through AWS Lambda (ex: CSV => JSON)"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Support compression when target is ",(0,r.jsx)(s.strong,{children:"S3"})," (GZIP, ZIP and SNAPPY)"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Only GZIP is the data is further loaded into Redshift"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Pay for the amount of data going through Firehose"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Spark / KCL do not read from KDF"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Write to KDF"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"SDK"}),"\n",(0,r.jsx)(s.li,{children:"Kinesis Producer Library (KPL)"}),"\n",(0,r.jsx)(s.li,{children:"Kinesis Agent"}),"\n",(0,r.jsx)(s.li,{children:"Kinesis Data Streams (KDS)"}),"\n",(0,r.jsx)(s.li,{children:"CloudWatch Logs & Events"}),"\n",(0,r.jsx)(s.li,{children:"IoT rules action"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"&quot;read&quot;",src:n(2502).A+"",width:"957",height:"472"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Firehose Buffer Size","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Firehose accumulates records in a buffer"}),"\n",(0,r.jsx)(s.li,{children:"The buffer is flushed based on time and size rules"}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Buffer Size (ex: 32MB):"})," if size is reached, it's flushed"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Buffer Time (ex: 2 minutes):"})," if that time is reached, it's flushed"]}),"\n",(0,r.jsx)(s.li,{children:"Firehose can automatically increase the buffer size to increase throughput"}),"\n",(0,r.jsx)(s.li,{children:"High throughput => Buffer Size will be hit : usually we flush based on size"}),"\n",(0,r.jsx)(s.li,{children:"Low throughput => Buffer Time be hit : usually we flush on time"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"3-kinesis-data-streams-vs-firehose",children:"3. Kinesis Data Streams vs Firehose"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Streams"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Going to write custom code (producer / consumer)"}),"\n",(0,r.jsx)(s.li,{children:"Real time (~ 200 ms latency for class, ~ 70 ms latency for enhanced fan-out)"}),"\n",(0,r.jsx)(s.li,{children:"Must manage scaling (shard spliting / merging)"}),"\n",(0,r.jsx)(s.li,{children:"Data storage for 1 to 7 days , replay capability, mutli consumers"}),"\n",(0,r.jsxs)(s.li,{children:["Use with ",(0,r.jsx)(s.strong,{children:"Lambda"})," to insert data in real-time to ElasticSearch (for example)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Firehose"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Fully managed, send to S3, Splunk, Redshift, ElasticSearch"}),"\n",(0,r.jsx)(s.li,{children:"Serveless data transformations with Lambda"}),"\n",(0,r.jsxs)(s.li,{children:["Near real time ",(0,r.jsx)(s.strong,{children:"(lowest buffer time is 1 minute)"})]}),"\n",(0,r.jsx)(s.li,{children:"Autmated Scaling"}),"\n",(0,r.jsx)(s.li,{children:"No data storage"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Install Kinesis Agent\r\n",(0,r.jsx)(s.code,{children:"sudo yum install -y aws-kinesis-agent"})]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},2502:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/kdf_read_write-085b1af6577f4c53f570150b128cbfa4.PNG"},3640:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/kinesis_record-c5cea7d6b2418041f88daaced7be459f.png"},8453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>a});var i=n(6540);const r={},l=i.createContext(r);function t(e){const s=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:s},e.children)}}}]);