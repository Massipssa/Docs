"use strict";(self.webpackChunktestdoc=self.webpackChunktestdoc||[]).push([[5817],{25108:(s,e,n)=>{n.d(e,{A:()=>i});const i=n.p+"assets/images/kinesis_record-c5cea7d6b2418041f88daaced7be459f.png"},28453:(s,e,n)=>{n.d(e,{R:()=>t,x:()=>a});var i=n(96540);const r={},l=i.createContext(r);function t(s){const e=i.useContext(l);return i.useMemo(function(){return"function"==typeof s?s(e):{...e,...s}},[e,s])}function a(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(r):s.components||r:t(s.components),i.createElement(l.Provider,{value:e},s.children)}},48378:(s,e,n)=>{n.d(e,{A:()=>i});const i=n.p+"assets/images/kdf_read_write-085b1af6577f4c53f570150b128cbfa4.png"},51599:(s,e,n)=>{n.r(e),n.d(e,{assets:()=>d,contentTitle:()=>a,default:()=>o,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"cloud/aws/Collection/kinesis/kinesis","title":"Kinesis","description":"- Kinesis","source":"@site/docs/cloud/aws/Collection/kinesis/kinesis.md","sourceDirName":"cloud/aws/Collection/kinesis","slug":"/cloud/aws/Collection/kinesis/","permalink":"/Docs/docs/next/cloud/aws/Collection/kinesis/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/cloud/aws/Collection/kinesis/kinesis.md","tags":[],"version":"current","frontMatter":{},"sidebar":"cloudSidebar","previous":{"title":"Global Accelerator","permalink":"/Docs/docs/next/cloud/aws/Cache/global-accelerator"},"next":{"title":"Simple Notification Service (SNS)","permalink":"/Docs/docs/next/cloud/aws/Collection/sns"}}');var r=n(74848),l=n(28453);const t={},a="Kinesis",d={},c=[{value:"1. Kinesis Streams",id:"1-kinesis-streams",level:2},{value:"Kinesis Streams Shards",id:"kinesis-streams-shards",level:3},{value:"Limits",id:"limits",level:3},{value:"2. Kinesis Data Firehose (KDF)",id:"2-kinesis-data-firehose-kdf",level:2},{value:"3. Kinesis Data Streams vs Firehose",id:"3-kinesis-data-streams-vs-firehose",level:2}];function h(s){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,l.R)(),...s.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"kinesis",children:"Kinesis"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"#kinesis",children:"Kinesis"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"#1-kinesis-streams",children:"1. Kinesis Streams"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#kinesis-streams-shards",children:"Kinesis Streams Shards"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#limits",children:"Limits"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#2-kinesis-data-firehose-kdf",children:"2. Kinesis Data Firehose (KDF)"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#3-kinesis-data-streams-vs-firehose",children:"3. Kinesis Data Streams vs Firehose"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"1-kinesis-streams",children:"1. Kinesis Streams"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Goal:"})," low latency streaming ingest at scale"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Streams are divided in ordered Shards / Partitons"}),"\n",(0,r.jsx)(e.li,{children:"Data retention is 24 hours by default, can go up to 7 days"}),"\n",(0,r.jsx)(e.li,{children:"Ability to repocess / replay data"}),"\n",(0,r.jsx)(e.li,{children:"Multiple applications can consume the same stream"}),"\n",(0,r.jsx)(e.li,{children:"Real-time processing with scale of throughput"}),"\n",(0,r.jsx)(e.li,{children:"Once data is insereted in Kinesis, is can't be deleted (immutablity)"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"kinesis-streams-shards",children:"Kinesis Streams Shards"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"One stream is made of one or multiple shards"}),"\n",(0,r.jsx)(e.li,{children:"Billing is per shard provisioned, can have as shards as we want"}),"\n",(0,r.jsx)(e.li,{children:"Batching available or per message calls"}),"\n",(0,r.jsx)(e.li,{children:"Number of shards can evolve over time (reshard, merge)"}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"Record are not to be ordered globally they'll be ordered per shard"})}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"kinesis_record",src:n(25108).A+"",width:"919",height:"465"})}),"\n",(0,r.jsx)(e.h3,{id:"limits",children:"Limits"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Producer"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"1 MB/s or 1000 messages/s at write PER SHARD"}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"ProvisionedThroughputException"})," otherwise"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Consumer"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"2 MB/s at read PER SHARD accross all consumers"}),"\n",(0,r.jsx)(e.li,{children:"5 API calls per second PER SHARD across all consumers"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Consumer Enhanced Fan-Out"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"2 MB/s at read PER SHARD, PER ENHANCED CONSUMER"}),"\n",(0,r.jsx)(e.li,{children:"No API calls need (push model)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Data Retention"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"24 hours data retention by default"}),"\n",(0,r.jsx)(e.li,{children:"Can be extended to 7 days"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"2-kinesis-data-firehose-kdf",children:"2. Kinesis Data Firehose (KDF)"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Goal:"})," load into S3, Redshift, ELK and Splunk"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Fully Managed Service, no administration"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.em,{children:(0,r.jsx)(e.strong,{children:"Near Real Time"})})," 60 seconds latency mim for non full batches"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Load data into Readshift / Amazon S3 / ElasticSearch / Splunk"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Automtic scaling"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Supports many data formats"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Data Conversions from JSON to Parquet / ORC (Only for S3)"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Data Transformationi through AWS Lambda (ex: CSV => JSON)"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Support compression when target is ",(0,r.jsx)(e.strong,{children:"S3"})," (GZIP, ZIP and SNAPPY)"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Only GZIP is the data is further loaded into Redshift"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Pay for the amount of data going through Firehose"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Spark / KCL do not read from KDF"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Write to KDF"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"SDK"}),"\n",(0,r.jsx)(e.li,{children:"Kinesis Producer Library (KPL)"}),"\n",(0,r.jsx)(e.li,{children:"Kinesis Agent"}),"\n",(0,r.jsx)(e.li,{children:"Kinesis Data Streams (KDS)"}),"\n",(0,r.jsx)(e.li,{children:"CloudWatch Logs & Events"}),"\n",(0,r.jsx)(e.li,{children:"IoT rules action"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"kdf_read_write",src:n(48378).A+"",width:"957",height:"472"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Firehose Buffer Size","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Firehose accumulates records in a buffer"}),"\n",(0,r.jsx)(e.li,{children:"The buffer is flushed based on time and size rules"}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Buffer Size (ex: 32MB):"})," if size is reached, it's flushed"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Buffer Time (ex: 2 minutes):"})," if that time is reached, it's flushed"]}),"\n",(0,r.jsx)(e.li,{children:"Firehose can automatically increase the buffer size to increase throughput"}),"\n",(0,r.jsx)(e.li,{children:"High throughput => Buffer Size will be hit : usually we flush based on size"}),"\n",(0,r.jsx)(e.li,{children:"Low throughput => Buffer Time be hit : usually we flush on time"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"3-kinesis-data-streams-vs-firehose",children:"3. Kinesis Data Streams vs Firehose"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Streams"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Going to write custom code (producer / consumer)"}),"\n",(0,r.jsx)(e.li,{children:"Real time (~ 200 ms latency for class, ~ 70 ms latency for enhanced fan-out)"}),"\n",(0,r.jsx)(e.li,{children:"Must manage scaling (shard spliting / merging)"}),"\n",(0,r.jsx)(e.li,{children:"Data storage for 1 to 7 days , replay capability, mutli consumers"}),"\n",(0,r.jsxs)(e.li,{children:["Use with ",(0,r.jsx)(e.strong,{children:"Lambda"})," to insert data in real-time to ElasticSearch (for example)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Firehose"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Fully managed, send to S3, Splunk, Redshift, ElasticSearch"}),"\n",(0,r.jsx)(e.li,{children:"Serveless data transformations with Lambda"}),"\n",(0,r.jsxs)(e.li,{children:["Near real time ",(0,r.jsx)(e.strong,{children:"(lowest buffer time is 1 minute)"})]}),"\n",(0,r.jsx)(e.li,{children:"Autmated Scaling"}),"\n",(0,r.jsx)(e.li,{children:"No data storage"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Install Kinesis Agent\r\n",(0,r.jsx)(e.code,{children:"sudo yum install -y aws-kinesis-agent"})]}),"\n"]}),"\n"]})]})}function o(s={}){const{wrapper:e}={...(0,l.R)(),...s.components};return e?(0,r.jsx)(e,{...s,children:(0,r.jsx)(h,{...s})}):h(s)}}}]);