"use strict";(self.webpackChunktestdoc=self.webpackChunktestdoc||[]).push([[7279],{8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>a});var r=s(6540);const i={},l=r.createContext(i);function t(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(l.Provider,{value:n},e.children)}},9547:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"cloud/aws/Analysis/athena","title":"Athena","description":"- Is serverless to query S3 using SQL","source":"@site/docs/cloud/aws/Analysis/athena.md","sourceDirName":"cloud/aws/Analysis","slug":"/cloud/aws/Analysis/athena","permalink":"/Docs/docs/cloud/aws/Analysis/athena","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/cloud/aws/Analysis/athena.md","tags":[],"version":"current","frontMatter":{},"sidebar":"cloudSidebar","previous":{"title":"NoSQL Databases","permalink":"/Docs/docs/cloud/aws/Databases/nosql-db"},"next":{"title":"AWS Data Pipeline","permalink":"/Docs/docs/cloud/aws/Analysis/data-pipeline"}}');var i=s(4848),l=s(8453);const t={},a="Athena",c={},o=[{value:"Performance",id:"performance",level:2},{value:"Costs",id:"costs",level:2},{value:"Federated Query",id:"federated-query",level:2},{value:"Security",id:"security",level:2},{value:"Anti-Pattern",id:"anti-pattern",level:2}];function d(e){const n={h1:"h1",h2:"h2",header:"header",li:"li",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"athena",children:"Athena"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Is serverless to query ",(0,i.jsx)(n.strong,{children:"S3"})," using SQL"]}),"\n",(0,i.jsxs)(n.li,{children:["Uses SQL language to query files (Build on top of ",(0,i.jsx)(n.strong,{children:"Apache Presto"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"It's schema on read"}),"\n",(0,i.jsxs)(n.li,{children:["Accepts format:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"CSV"}),"\n",(0,i.jsx)(n.li,{children:"Json"}),"\n",(0,i.jsx)(n.li,{children:"Parquet (columnar, splittable)"}),"\n",(0,i.jsx)(n.li,{children:"ORC (columnar, splittable)"}),"\n",(0,i.jsx)(n.li,{children:"Avro (columnar, splittable)"}),"\n",(0,i.jsx)(n.li,{children:"XML"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Princing: fixe amount per TB of data scanned"}),"\n",(0,i.jsx)(n.li,{children:"Structured, semi-structured an unstructured data"}),"\n",(0,i.jsx)(n.li,{children:"Uses cases: BI, analytics, reporting, query logs, Ad-hoc queries"}),"\n",(0,i.jsxs)(n.li,{children:["Athena detect automatically the tables from ",(0,i.jsx)(n.strong,{children:"Glue,"})," and it creates queryable table"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"performance",children:"Performance"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use columnar"})," data for cost-savings (less scan)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Apache Parquet or ORC is recommended"}),"\n",(0,i.jsx)(n.li,{children:"Use Glue to convert data to Parquet or ORC"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Compress data"})," for smaller retrievals (bzip2, gzip, lz4, snappy, zlip, zstd, ...)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Partition datasets"})," in S3 for easy querying on virtual columns"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use larger files"})," ( > 128 MB) to minimize overhead"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"costs",children:"Costs"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Pay-as-you-go","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["$5 per TB scanned","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Successful or cancelled"})," queries count, ",(0,i.jsx)(n.strong,{children:"failed"})," queries do not"]}),"\n",(0,i.jsx)(n.li,{children:"No charge for DDL (Create/ Alter, Drop, ...)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Save money by using columnar formats","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"ORC, Parquet"}),"\n",(0,i.jsx)(n.li,{children:"Save 30-90% and get better performance"}),"\n",(0,i.jsx)(n.li,{children:"Good partitioning (Less query CPU)"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Glue and S3 have their own charges"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"federated-query",children:"Federated Query"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Query data anywhere (S3 ou on-premise)"}),"\n",(0,i.jsx)(n.li,{children:"Use Data Source Connectors thar run on AWS Lambda to run Federated Queries"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"security",children:"Security"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Access control","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"IAM, ACLs, S3 bucket policies"}),"\n",(0,i.jsx)(n.li,{children:"AmazonAthenFullAcces/"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Encrypt .... ???"}),"\n",(0,i.jsx)(n.li,{children:"Cross-acount in S3 bucket policy possible"}),"\n",(0,i.jsx)(n.li,{children:"Transport Layer Security (TLS) encrypts in-transit (between Athena and S3)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"anti-pattern",children:"Anti-Pattern"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Highly formatted reports / visualization => That's what ",(0,i.jsx)(n.strong,{children:"QuickSight"})," is for"]}),"\n",(0,i.jsx)(n.li,{children:"ETL (not suitable for ETL actions) => use Gue instead"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);