"use strict";(self.webpackChunktestdoc=self.webpackChunktestdoc||[]).push([[6056],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var i=s(96540);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}},56541:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"big-data/old/hbase/architecture","title":"architecture","description":"Components","source":"@site/docs/big-data/old/hbase/architecture.md","sourceDirName":"big-data/old/hbase","slug":"/big-data/old/hbase/architecture","permalink":"/Docs/docs/next/big-data/old/hbase/architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/big-data/old/hbase/architecture.md","tags":[],"version":"current","frontMatter":{},"sidebar":"bigdataSidebar","previous":{"title":"hdfs","permalink":"/Docs/docs/next/big-data/hdfs"},"next":{"title":"basics","permalink":"/Docs/docs/next/big-data/old/hbase/basics"}}');var r=s(74848),t=s(28453);const l={},o=void 0,d={},c=[{value:"Components",id:"components",level:2},{value:"Data Model",id:"data-model",level:2},{value:"Notes",id:"notes",level:2}];function a(e){const n={code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"components",children:"Components"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"HMaster server"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Acts as NameNode in HDFS"}),"\n",(0,r.jsx)(n.li,{children:"Handles and manage Region Server"}),"\n",(0,r.jsx)(n.li,{children:"Performs DDL operations"}),"\n",(0,r.jsx)(n.li,{children:"Assigns regions to Region Servers"}),"\n",(0,r.jsx)(n.li,{children:"Performs recovery activities"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"HBase Region server"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Responsible for handling, manging, executing reads and writes operations on the set of regions"}),"\n",(0,r.jsxs)(n.li,{children:["Region","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Contains all the rows between the start key and end key"}),"\n",(0,r.jsx)(n.li,{children:"Hbase table can be divided into a number of regions in such way that all the columns of family\r\nis stored in one region"}),"\n",(0,r.jsxs)(n.li,{children:["Each region contains the rows in ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"sorted order"})})]}),"\n",(0,r.jsx)(n.li,{children:"Many regions are assigned to a Region Server"}),"\n",(0,r.jsxs)(n.li,{children:["Default size of region is ",(0,r.jsx)(n.strong,{children:"256 MB"})," which can be configured"]}),"\n",(0,r.jsx)(n.li,{children:"They are automatically scaled when they become large, or they can be also merged"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Recommendations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"10 to 10000 regions per region server"}),"\n",(0,r.jsx)(n.li,{children:"Between 1 GB to 2 GB per size for each region"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Zookeeper"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Acts as a coordinator inside HBase"}),"\n",(0,r.jsx)(n.li,{children:"Helps in maintains servers states. Servers send heartbeat to Zookeeper"}),"\n",(0,r.jsx)(n.li,{children:"Maintains .META server's path"}),"\n",(0,r.jsx)(n.li,{children:"Region servers are created as ephemeral nodes, once they fail to send heartbeat the node are deleted"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Region Server"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"![region_server](../screenshots/hbase/region_server.png)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Block Cache"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"It stores in the memory the frequently accessed data"}),"\n",(0,r.jsx)(n.li,{children:"If the data in BlockCache is least recently used, then that data is removed from BlockCache"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"WAL (Write Ahead Log)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Is a file attached to every Region Server"}),"\n",(0,r.jsx)(n.li,{children:"Stores a new data hasn't been persisted or committed to permanent storage"}),"\n",(0,r.jsx)(n.li,{children:"It is used in case of failure to recover data sets"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"MemStore"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"It is write cache store"}),"\n",(0,r.jsx)(n.li,{children:"It stores all the incoming data before committing it to the disk or permanent memory"}),"\n",(0,r.jsx)(n.li,{children:"There is one MemStore for each column family"}),"\n",(0,r.jsx)(n.li,{children:"The data is stored in lexicographical order before committing it to the disk"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Hfile"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"It stores data to cells on the disk"}),"\n",(0,r.jsx)(n.li,{children:"Persistent, ordered and  immutable, it maps keys to values"}),"\n",(0,r.jsxs)(n.li,{children:["Default size ",(0,r.jsx)(n.strong,{children:"64 KB"})]}),"\n",(0,r.jsx)(n.li,{children:"MemStore commit the data to Hfile when the size of MemStore exceeds"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Read Mechanism"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Write Mechanism"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"data-model",children:"Data Model"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Table:"})," is made of set columns and rows"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Row:"})," addressed uniquely by ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"row key"})}),"*"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Column family:"})," set of column"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Column"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Small unit in HBase"}),"\n",(0,r.jsxs)(n.li,{children:["May have multiple ",(0,r.jsx)(n.strong,{children:"versions"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Version"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Distinct the values contained in ",(0,r.jsx)(n.strong,{children:"cells"})]}),"\n",(0,r.jsx)(n.li,{children:"They are stored in decreasing timestamped order which helps to retrieve the newest value first"}),"\n",(0,r.jsx)(n.li,{children:"User can specify the number of version to keep"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SortedMap<RowKey, // first map --\x3e is table (map row keo to list of CF)\r\n\tList<SortedMap<Column, // first list --\x3e CF, second map --\x3e (map column to list of values) \r\n\t\tList<Value, Timestamp>>>> // second list --\x3e List of values and ts\n"})}),"\n",(0,r.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Sparse"}),"\n",(0,r.jsx)(n.li,{children:"wWide tables"}),"\n",(0,r.jsx)(n.li,{children:"Column-oriented"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Often eliminate the to normalize data, and the ",(0,r.jsx)(n.strong,{children:"Join"})," operations cost needed to aggregate data"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Use of intelligent keys gives fine-grained control over how - and where data is stored."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Set large memory for region servers, could sometimes be dangerous, because of GC"}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);