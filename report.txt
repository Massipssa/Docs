#!/bin/bash

CSV_FILE="backup-1.csv"

tail -n +2 "$CSV_FILE" | while IFS=';' read -r idt froot; do
  clean_froot="${froot%.txt.gz}"
  clean_froot="${clean_froot%.log}"

  for fichier in *"$idt"*; do
    if [[ -f "$fichier" ]]; then
      nouveau_nom="${fichier//$idt/$clean_froot}"
      echo "Renommage : $fichier -> $nouveau_nom"
      mv "$fichier" "$nouveau_nom"
    fi
  done
done
