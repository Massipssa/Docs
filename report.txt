import { useLocation } from 'react-router-dom';
import { Box, Typography, Tabs, Tab, TextField } from '@mui/material';
import { DesktopDatePicker } from '@mui/x-date-pickers/DesktopDatePicker';
import { useState } from 'react';
import dayjs from 'dayjs';

const ProjectDetails = () => {
  const location = useLocation();
  const { project } = location.state; // Retrieve the passed project data
  const [selectedDate, setSelectedDate] = useState(dayjs(project.lastUpdate, 'DD/MM/YYYY')); // Set the default date

  // Placeholder CRE data based on date
  const creData = {
    "14/08/2024": { critical: 2, nonCritical: 1 },
    "01/09/2024": { critical: 3, nonCritical: 0 }
    // Add more data as needed
  };

  // Get the CRE data based on the selected date
  const creForDate = creData[selectedDate.format('DD/MM/YYYY')] || { critical: 0, nonCritical: 0 };

  const handleDateChange = (newDate) => {
    setSelectedDate(newDate); // Update the date when the user selects a new one
  };

  return (
    <Box sx={{ p: 3 }}>
      <Typography variant="h4" gutterBottom>
        {project.name}
      </Typography>

      {/* Date Picker to Filter CRE Based on Date */}
      <DesktopDatePicker
        label="Filter by Date"
        inputFormat="DD/MM/YYYY"
        value={selectedDate}
        onChange={handleDateChange}
        renderInput={(params) => <TextField {...params} fullWidth />}
      />

      <Typography variant="body1" sx={{ mt: 2 }}>
        Nombre de CRE Critiques: {creForDate.critical}
      </Typography>
      <Typography variant="body1">
        Nombre de CRE Non Critiques: {creForDate.nonCritical}
      </Typography>

      {/* Add more details or Tabs as required */}
    </Box>
  );
};

export default ProjectDetails;
