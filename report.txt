import React from 'react';
import MaterialReactTable, { useMaterialTable } from 'material-react-table';
import { Box, Grid, TextField, Typography } from '@mui/material';

const ExampleTable = () => {
  const columns = [
    { accessorKey: 'name', header: 'Name' },
    { accessorKey: 'age', header: 'Age' },
    { accessorKey: 'email', header: 'Email' }
  ];

  const data = [
    { name: 'John Doe', age: 28, email: 'john@example.com' },
    { name: 'Jane Smith', age: 34, email: 'jane@example.com' },
    { name: 'Alice Johnson', age: 45, email: 'alice@example.com' }
  ];

  // useMaterialTable hook to manage table state and functionality
  const {
    tableInstance, // get the table instance
  } = useMaterialTable({
    data,
    columns,
    enableGlobalFilter: true,  // Enable the search bar
    enablePagination: true,    // Enable pagination
  });

  return (
    <Box sx={{ padding: 3 }}>
      <MaterialReactTable
        tableInstance={tableInstance}
        positionPagination="top"
        renderTopToolbarCustomActions={() => (
          <Grid container justifyContent="space-between" alignItems="center">
            <Grid item>
              {/* Search bar aligned to the left */}
              <TextField
                value={tableInstance.state.globalFilter ?? ''}
                onChange={(event) => tableInstance.setGlobalFilter(event.target.value)}
                placeholder="Search..."
                sx={{ width: '300px' }}
              />
            </Grid>
            <Grid item>
              {/* Pagination controls aligned to the right */}
              <Box>
                {tableInstance.getPaginationRowModel().rows.length > 0 && (
                  <Typography>
                    Page {tableInstance.getState().pagination.pageIndex + 1} of{' '}
                    {tableInstance.getPaginationRowModel().rows.length}
                  </Typography>
                )}
              </Box>
            </Grid>
          </Grid>
        )}
      />
    </Box>
  );
};

const App = () => {
  return <ExampleTable />;
};

export default App;
