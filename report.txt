#!/bin/bash

# Chemin vers le fichier CSV
fichier_csv="liste_fichiers.csv"

# Dossier contenant les fichiers à renommer
dossier="/path/tmp"

# Lire le CSV ligne par ligne en ignorant l’en-tête
tail -n +2 "$fichier_csv" | while IFS=';' read -r idt froot; do
  for fichier in "$dossier"/*"$idt"*; do
    if [[ -f "$fichier" ]]; then
      nouveau_nom="${fichier//$idt/$froot}"
      echo "Renommage : $fichier -> $nouveau_nom"
      mv "$fichier" "$nouveau_nom"
    fi
  done
done
